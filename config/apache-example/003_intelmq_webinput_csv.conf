# Copyright (c) 2017-2018 nic.at GmbH <wagner@cert.at>
# SPDX-License-Identifier: AGPL-3.0

<VirtualHost *:8667>
    WSGIDaemonProcess www user=intelmq group=intelmq threads=5
    WSGIScriptAlias / /path/to/intelmq_webinput_csv/serve.py
    WSGICallableObject __hug_wsgi__
    # optional if authorization is enabled
    WSGIPassAuthorization On

    # optional
    SetEnv WEBINPUT_CSV_CONFIG /path/to/webinput_csv.conf
    # optional
    SetEnv WEBINPUT_CSV_SESSION_CONFIG /path/to/webinput-session.conf
    <Directory /path/to/intelmq_webinput_csv/>
        # optional:
        WSGIProcessGroup www
        # optional:
        WSGIApplicationGroup %{GLOBAL}
        Require all granted 
    </Directory>
</VirtualHost>

<VirtualHost *>
        ServerAdmin webmaster@localhost
        DocumentRoot /path/to/client/dist

        <Directory /path/to/client/dist>
            Require all granted
        </Directory>

        ProxyPass /api http://localhost:8667/api
        ProxyPassReverse /api http://localhost:8667/api

        # RewriteEngine on
        # RewriteCond %{REQUEST_URI} !^/(index.html|api)
        # RewriteRule .* /index.html [PT]

        ErrorLog ${APACHE_LOG_DIR}/webinput-error.log
        CustomLog ${APACHE_LOG_DIR}/webinput-access.log combined
</VirtualHost>
